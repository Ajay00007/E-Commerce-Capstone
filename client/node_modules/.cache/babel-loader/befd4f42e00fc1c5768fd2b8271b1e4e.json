{"ast":null,"code":"import _regeneratorRuntime from\"/home/andre/Documents/GithubRepos/Group_06/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/andre/Documents/GithubRepos/Group_06/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/andre/Documents/GithubRepos/Group_06/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef,useState}from\"react\";import{Container}from\"react-bootstrap\";import{APIpaths}from\"../API\";import axios from\"axios\";import PaginationNav from\"../components/PaginationNav\";import styles from\"./Products.module.css\";import LoadingSpinner from\"../components/LoadingSpinner\";import CardItem from\"../components/CardItem\";export default function Products(){var totalPages=useRef(null);var _useState=useState(1),_useState2=_slicedToArray(_useState,2),currentPage=_useState2[0],setCurrentPage=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),nextPage=_useState4[0],setNextPage=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),prevPage=_useState6[0],setPrevPage=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),paginatedData=_useState8[0],setPaginatedData=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];useEffect(function(){setLoading(true);handleGetData(currentPage);},[currentPage]);function handleGetData(){return _handleGetData.apply(this,arguments);}function _handleGetData(){_handleGetData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var pageToGet,limitToGet,results,_args=arguments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:pageToGet=_args.length>0&&_args[0]!==undefined?_args[0]:1;limitToGet=_args.length>1&&_args[1]!==undefined?_args[1]:12;_context.prev=2;_context.next=5;return axios.get(\"\".concat(APIpaths.getAllItems,\"?page=\").concat(pageToGet.toString(),\"&limit=\").concat(limitToGet));case 5:results=_context.sent;setPaginatedData(results.data);if(results.data.next){setNextPage(results.data.next.page);}else{setNextPage(null);}if(results.data.previous){setPrevPage(results.data.previous.page);}else{setPrevPage(null);}if(results.data.total.pages!==totalPages.current){totalPages.current=results.data.total.pages;}setLoading(false);_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](2);return _context.abrupt(\"return\",console.log(_context.t0));case 16:case\"end\":return _context.stop();}}},_callee,null,[[2,13]]);}));return _handleGetData.apply(this,arguments);}function handleGetNextPage(){if(nextPage!==null){setCurrentPage(nextPage);}else{return;}}function handleGetPreviousPage(){if(prevPage!==null){setCurrentPage(prevPage);}else{return;}}function handleGoToPage(pageNum){if(currentPage<=totalPages.current&&pageNum>0){setCurrentPage(pageNum);}else{return;}}return/*#__PURE__*/React.createElement(Container,{className:\"min-vh-100 mt-5\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Products\"),/*#__PURE__*/React.createElement(Container,{className:\"mb-5 text-center \".concat(styles.rowFlex)},loading?/*#__PURE__*/React.createElement(LoadingSpinner,null):paginatedData&&paginatedData.results.length>0?paginatedData.results.map(CardItem):/*#__PURE__*/React.createElement(\"p\",null,\"No content to display.\")),totalPages.current>1?/*#__PURE__*/React.createElement(PaginationNav,{totalPages:totalPages.current,prevPage:prevPage,nextPage:nextPage,currentPage:currentPage,handleGetNextPage:handleGetNextPage,handleGetPreviousPage:handleGetPreviousPage,handleGoToPage:handleGoToPage}):null);}","map":{"version":3,"sources":["/home/andre/Documents/GithubRepos/Group_06/client/src/pages/Products.js"],"names":["React","useEffect","useRef","useState","Container","APIpaths","axios","PaginationNav","styles","LoadingSpinner","CardItem","Products","totalPages","currentPage","setCurrentPage","nextPage","setNextPage","prevPage","setPrevPage","paginatedData","setPaginatedData","loading","setLoading","handleGetData","pageToGet","limitToGet","get","getAllItems","toString","results","data","next","page","previous","total","pages","current","console","log","handleGetNextPage","handleGetPreviousPage","handleGoToPage","pageNum","rowFlex","length","map"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { Container } from \"react-bootstrap\";\nimport { APIpaths } from \"../API\";\nimport axios from \"axios\";\nimport PaginationNav from \"../components/PaginationNav\";\nimport styles from \"./Products.module.css\";\nimport LoadingSpinner from \"../components/LoadingSpinner\";\nimport CardItem from \"../components/CardItem\";\n\nexport default function Products() {\n  const totalPages = useRef(null);\n\n  const [currentPage, setCurrentPage] = useState(1);\n  const [nextPage, setNextPage] = useState(null);\n  const [prevPage, setPrevPage] = useState(null);\n\n  const [paginatedData, setPaginatedData] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    setLoading(true);\n    handleGetData(currentPage);\n  }, [currentPage]);\n\n  async function handleGetData(pageToGet = 1, limitToGet = 12) {\n    try {\n      const results = await axios.get(\n        `${\n          APIpaths.getAllItems\n        }?page=${pageToGet.toString()}&limit=${limitToGet}`\n      );\n\n      setPaginatedData(results.data);\n\n      if (results.data.next) {\n        setNextPage(results.data.next.page);\n      } else {\n        setNextPage(null);\n      }\n\n      if (results.data.previous) {\n        setPrevPage(results.data.previous.page);\n      } else {\n        setPrevPage(null);\n      }\n\n      if (results.data.total.pages !== totalPages.current) {\n        totalPages.current = results.data.total.pages;\n      }\n\n      setLoading(false);\n    } catch (error) {\n      return console.log(error);\n    }\n  }\n\n  function handleGetNextPage() {\n    if (nextPage !== null) {\n      setCurrentPage(nextPage);\n    } else {\n      return;\n    }\n  }\n\n  function handleGetPreviousPage() {\n    if (prevPage !== null) {\n      setCurrentPage(prevPage);\n    } else {\n      return;\n    }\n  }\n\n  function handleGoToPage(pageNum) {\n    if (currentPage <= totalPages.current && pageNum > 0) {\n      setCurrentPage(pageNum);\n    } else {\n      return;\n    }\n  }\n\n  return (\n    <Container className=\"min-vh-100 mt-5\">\n      <h1>Products</h1>\n\n      <Container className={`mb-5 text-center ${styles.rowFlex}`}>\n        {loading ? (\n          <LoadingSpinner />\n        ) : paginatedData && paginatedData.results.length > 0 ? (\n          paginatedData.results.map(CardItem)\n        ) : (\n          <p>No content to display.</p>\n        )}\n      </Container>\n\n      {totalPages.current > 1 ? (\n        <PaginationNav\n          totalPages={totalPages.current}\n          prevPage={prevPage}\n          nextPage={nextPage}\n          currentPage={currentPage}\n          handleGetNextPage={handleGetNextPage}\n          handleGetPreviousPage={handleGetPreviousPage}\n          handleGoToPage={handleGoToPage}\n        />\n      ) : null}\n    </Container>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}