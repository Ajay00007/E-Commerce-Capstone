{"ast":null,"code":"import _regeneratorRuntime from\"/home/andre/Documents/GithubRepos/Group_06/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/andre/Documents/GithubRepos/Group_06/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/andre/Documents/GithubRepos/Group_06/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from\"react\";import axios from\"axios\";import{APIpaths}from\"../API\";import useLocalStorage from\"../hooks/useLocalStorage\";var AuthContext=React.createContext();export function useAuth(){return useContext(AuthContext);}export function AuthProvider(_ref){var children=_ref.children;var _useState=useState(),_useState2=_slicedToArray(_useState,2),currentUser=_useState2[0],setCurrentUser=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isAdmin=_useState4[0],setIsAdmin=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useLocalStorage=useLocalStorage(\"auth-token-user\",null),_useLocalStorage2=_slicedToArray(_useLocalStorage,2),authTokenUser=_useLocalStorage2[0],setAuthTokenUser=_useLocalStorage2[1];var _useLocalStorage3=useLocalStorage(\"auth-token-admin\",null),_useLocalStorage4=_slicedToArray(_useLocalStorage3,2),authTokenAdmin=_useLocalStorage4[0],setAuthTokenAdmin=_useLocalStorage4[1];function register(_x,_x2,_x3,_x4,_x5,_x6,_x7){return _register.apply(this,arguments);}function _register(){_register=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(name,email,password,street,city,province,postalCode){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post(APIpaths.registerUser,{name:name,email:email,password:password,street:street,city:city,province:province,postalCode:postalCode});case 2:res=_context.sent;setCurrentUser(res.data.user);setAuthTokenUser(res.data.token);case 5:case\"end\":return _context.stop();}}},_callee);}));return _register.apply(this,arguments);}function loginUser(_x8,_x9){return _loginUser.apply(this,arguments);}function _loginUser(){_loginUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(email,password){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post(APIpaths.loginUser,{email:email,password:password});case 2:res=_context2.sent;setCurrentUser(res.data.user);setAuthTokenUser(res.data.token);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return _loginUser.apply(this,arguments);}function loginAdmin(_x10,_x11){return _loginAdmin.apply(this,arguments);}function _loginAdmin(){_loginAdmin=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(email,password){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.post(APIpaths.loginAdmin,{email:email,password:password});case 2:res=_context3.sent;setCurrentUser(res.data.user);setIsAdmin(true);setAuthTokenAdmin(res.data.token);case 6:case\"end\":return _context3.stop();}}},_callee3);}));return _loginAdmin.apply(this,arguments);}function logout(){setIsAdmin(false);setCurrentUser(undefined);setAuthTokenUser(null);setAuthTokenAdmin(null);}function getUserFromToken(_x12){return _getUserFromToken.apply(this,arguments);}function _getUserFromToken(){_getUserFromToken=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(tokenValue){var res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios.get(APIpaths.getUser,{headers:{\"x-auth-token\":tokenValue}});case 3:res=_context4.sent;setCurrentUser(res.data);return _context4.abrupt(\"return\",true);case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](0);return _context4.abrupt(\"return\",false);case 11:case\"end\":return _context4.stop();}}},_callee4,null,[[0,8]]);}));return _getUserFromToken.apply(this,arguments);}function getAdminFromToken(_x13){return _getAdminFromToken.apply(this,arguments);}function _getAdminFromToken(){_getAdminFromToken=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(tokenValue){var res;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return axios.get(APIpaths.getAdmin,{headers:{\"x-auth-token\":tokenValue}});case 3:res=_context5.sent;setCurrentUser(res.data);setIsAdmin(true);return _context5.abrupt(\"return\",true);case 9:_context5.prev=9;_context5.t0=_context5[\"catch\"](0);return _context5.abrupt(\"return\",false);case 12:case\"end\":return _context5.stop();}}},_callee5,null,[[0,9]]);}));return _getAdminFromToken.apply(this,arguments);}function updateEmail(_x14){return _updateEmail.apply(this,arguments);}function _updateEmail(){_updateEmail=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(email){var data,config,res;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:data={email:email};config={headers:{\"x-auth-token\":authTokenUser}};_context6.next=4;return axios.put(APIpaths.updateEmail,data,config);case 4:res=_context6.sent;setCurrentUser(res.data);case 6:case\"end\":return _context6.stop();}}},_callee6);}));return _updateEmail.apply(this,arguments);}function updatePassword(_x15){return _updatePassword.apply(this,arguments);}function _updatePassword(){_updatePassword=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(password){var data,config;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:data={password:password};config={headers:{\"x-auth-token\":authTokenUser}};_context7.next=4;return axios.put(APIpaths.updatePass,data,config);case 4:case\"end\":return _context7.stop();}}},_callee7);}));return _updatePassword.apply(this,arguments);}function updateAddress(_x16){return _updateAddress.apply(this,arguments);}function _updateAddress(){_updateAddress=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(address){var data,config,res;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:data=address;config={headers:{\"x-auth-token\":authTokenUser}};_context8.next=4;return axios.put(APIpaths.updateAddress,data,config);case 4:res=_context8.sent;setCurrentUser(res.data);case 6:case\"end\":return _context8.stop();}}},_callee8);}));return _updateAddress.apply(this,arguments);}function createProduct(_x17){return _createProduct.apply(this,arguments);}function _createProduct(){_createProduct=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(productData){var config;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:config={headers:{\"x-auth-token\":authTokenAdmin}};_context9.prev=1;_context9.next=4;return axios.post(APIpaths.createItem,productData,config);case 4:_context9.next=9;break;case 6:_context9.prev=6;_context9.t0=_context9[\"catch\"](1);console.log(_context9.t0);case 9:case\"end\":return _context9.stop();}}},_callee9,null,[[1,6]]);}));return _createProduct.apply(this,arguments);}function updateProduct(_x18,_x19){return _updateProduct.apply(this,arguments);}function _updateProduct(){_updateProduct=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(productId,productData){var config;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:config={headers:{\"x-auth-token\":authTokenAdmin}};_context10.prev=1;_context10.next=4;return axios.put(APIpaths.updateItem+productId,productData,config);case 4:_context10.next=9;break;case 6:_context10.prev=6;_context10.t0=_context10[\"catch\"](1);console.log(_context10.t0);case 9:case\"end\":return _context10.stop();}}},_callee10,null,[[1,6]]);}));return _updateProduct.apply(this,arguments);}function deleteProduct(_x20){return _deleteProduct.apply(this,arguments);}function _deleteProduct(){_deleteProduct=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(productId){var config;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:config={headers:{\"x-auth-token\":authTokenAdmin}};_context11.prev=1;_context11.next=4;return axios.delete(APIpaths.deleteItem+productId,config);case 4:_context11.next=9;break;case 6:_context11.prev=6;_context11.t0=_context11[\"catch\"](1);console.log(_context11.t0);case 9:case\"end\":return _context11.stop();}}},_callee11,null,[[1,6]]);}));return _deleteProduct.apply(this,arguments);}useEffect(function(){if(!currentUser&&authTokenUser!==null){getUserFromToken(authTokenUser);}if(!currentUser&&authTokenAdmin!==null){getAdminFromToken(authTokenAdmin);}setCurrentUser(currentUser);setLoading(false);},[authTokenUser,authTokenAdmin,currentUser]);var value={currentUser:currentUser,isAdmin:isAdmin,loginUser:loginUser,loginAdmin:loginAdmin,register:register,logout:logout,updateEmail:updateEmail,updatePassword:updatePassword,updateAddress:updateAddress,createProduct:createProduct,updateProduct:updateProduct,deleteProduct:deleteProduct};return/*#__PURE__*/React.createElement(AuthContext.Provider,{value:value},!loading&&children);}","map":{"version":3,"sources":["/home/andre/Documents/GithubRepos/Group_06/client/src/contexts/AuthContext.js"],"names":["React","useContext","useEffect","useState","axios","APIpaths","useLocalStorage","AuthContext","createContext","useAuth","AuthProvider","children","currentUser","setCurrentUser","isAdmin","setIsAdmin","loading","setLoading","authTokenUser","setAuthTokenUser","authTokenAdmin","setAuthTokenAdmin","register","name","email","password","street","city","province","postalCode","post","registerUser","res","data","user","token","loginUser","loginAdmin","logout","undefined","getUserFromToken","tokenValue","get","getUser","headers","getAdminFromToken","getAdmin","updateEmail","config","put","updatePassword","updatePass","updateAddress","address","createProduct","productData","createItem","console","log","updateProduct","productId","updateItem","deleteProduct","delete","deleteItem","value"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { APIpaths } from \"../API\";\nimport useLocalStorage from \"../hooks/useLocalStorage\";\n\nconst AuthContext = React.createContext();\n\nexport function useAuth() {\n  return useContext(AuthContext);\n}\n\nexport function AuthProvider({ children }) {\n  const [currentUser, setCurrentUser] = useState();\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [loading, setLoading] = useState(true);\n\n  const [authTokenUser, setAuthTokenUser] = useLocalStorage(\n    \"auth-token-user\",\n    null\n  );\n  const [authTokenAdmin, setAuthTokenAdmin] = useLocalStorage(\n    \"auth-token-admin\",\n    null\n  );\n\n  async function register(\n    name,\n    email,\n    password,\n    street,\n    city,\n    province,\n    postalCode\n  ) {\n    const res = await axios.post(APIpaths.registerUser, {\n      name,\n      email,\n      password,\n      street,\n      city,\n      province,\n      postalCode,\n    });\n\n    setCurrentUser(res.data.user);\n    setAuthTokenUser(res.data.token);\n  }\n\n  async function loginUser(email, password) {\n    const res = await axios.post(APIpaths.loginUser, {\n      email,\n      password,\n    });\n    setCurrentUser(res.data.user);\n    setAuthTokenUser(res.data.token);\n  }\n\n  async function loginAdmin(email, password) {\n    const res = await axios.post(APIpaths.loginAdmin, {\n      email,\n      password,\n    });\n    setCurrentUser(res.data.user);\n    setIsAdmin(true);\n    setAuthTokenAdmin(res.data.token);\n  }\n\n  function logout() {\n    setIsAdmin(false);\n    setCurrentUser(undefined);\n    setAuthTokenUser(null);\n    setAuthTokenAdmin(null);\n  }\n\n  async function getUserFromToken(tokenValue) {\n    try {\n      const res = await axios.get(APIpaths.getUser, {\n        headers: { \"x-auth-token\": tokenValue },\n      });\n      setCurrentUser(res.data);\n      return true;\n    } catch (error) {\n      return false;\n    }\n  }\n\n  async function getAdminFromToken(tokenValue) {\n    try {\n      const res = await axios.get(APIpaths.getAdmin, {\n        headers: { \"x-auth-token\": tokenValue },\n      });\n      setCurrentUser(res.data);\n      setIsAdmin(true);\n      return true;\n    } catch (error) {\n      return false;\n    }\n  }\n\n  async function updateEmail(email) {\n    const data = { email };\n    const config = { headers: { \"x-auth-token\": authTokenUser } };\n\n    const res = await axios.put(APIpaths.updateEmail, data, config);\n\n    setCurrentUser(res.data);\n  }\n\n  async function updatePassword(password) {\n    const data = { password };\n    const config = { headers: { \"x-auth-token\": authTokenUser } };\n\n    await axios.put(APIpaths.updatePass, data, config);\n  }\n\n  async function updateAddress(address) {\n    const data = address;\n    const config = { headers: { \"x-auth-token\": authTokenUser } };\n\n    const res = await axios.put(APIpaths.updateAddress, data, config);\n\n    setCurrentUser(res.data);\n  }\n\n  async function createProduct(productData) {\n    const config = { headers: { \"x-auth-token\": authTokenAdmin } };\n\n    try {\n      await axios.post(APIpaths.createItem, productData, config);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  async function updateProduct(productId, productData) {\n    const config = { headers: { \"x-auth-token\": authTokenAdmin } };\n\n    try {\n      await axios.put(APIpaths.updateItem + productId, productData, config);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  async function deleteProduct(productId) {\n    const config = { headers: { \"x-auth-token\": authTokenAdmin } };\n\n    try {\n      await axios.delete(APIpaths.deleteItem + productId, config);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  useEffect(() => {\n    if (!currentUser && authTokenUser !== null) {\n      getUserFromToken(authTokenUser);\n    }\n    if (!currentUser && authTokenAdmin !== null) {\n      getAdminFromToken(authTokenAdmin);\n    }\n    setCurrentUser(currentUser);\n    setLoading(false);\n  }, [authTokenUser, authTokenAdmin, currentUser]);\n\n  const value = {\n    currentUser,\n    isAdmin,\n    loginUser,\n    loginAdmin,\n    register,\n    logout,\n    updateEmail,\n    updatePassword,\n    updateAddress,\n    createProduct,\n    updateProduct,\n    deleteProduct,\n  };\n\n  return (\n    <AuthContext.Provider value={value}>\n      {!loading && children}\n    </AuthContext.Provider>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}