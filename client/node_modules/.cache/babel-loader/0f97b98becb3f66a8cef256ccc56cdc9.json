{"ast":null,"code":"import _slicedToArray from\"/home/andre/Documents/GithubRepos/Group_06/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{APIpaths,baseUrl}from\"../API\";import{Alert,Badge,Button,Col,Container,Image,Modal,Row}from\"react-bootstrap\";import{useCart}from\"../contexts/CartContext\";import{useAuth}from\"../contexts/AuthContext\";import{Link,useHistory}from\"react-router-dom\";import LoadingSpinner from\"../components/LoadingSpinner\";import FeaturedItems from\"../components/FeaturedItems\";export default function ProductDetail(_ref){var match=_ref.match;var _useState=useState(),_useState2=_slicedToArray(_useState,2),productData=_useState2[0],setProductData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showAlert=_useState6[0],setShowAlert=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showModal=_useState8[0],setShowModal=_useState8[1];var _useCart=useCart(),addToCart=_useCart.addToCart;var _useAuth=useAuth(),isAdmin=_useAuth.isAdmin,deleteProduct=_useAuth.deleteProduct;var history=useHistory();function handleModalClose(){setShowModal(false);}function handleModalShow(){setShowModal(true);}function handleDelete(e){e.preventDefault();try{deleteProduct(productData._id);history.push(\"/products\");}catch(error){console.log(error);}}function handleAddToCart(productId){setShowAlert(true);addToCart(productId);}useEffect(function(){window.scrollTo(0,0);setLoading(true);axios.get(APIpaths.getOneItem+match.params.id).then(function(res){setProductData(res.data);setLoading(false);}).catch(function(err){return console.log(err);});},[match.params.id]);return/*#__PURE__*/React.createElement(Container,{className:\"min-vh-100 mt-5\"},showAlert&&/*#__PURE__*/React.createElement(Alert,{variant:\"success\",onClose:function onClose(){return setShowAlert(false);},dismissible:true},/*#__PURE__*/React.createElement(\"p\",null,\"Product has been added to cart.\")),!loading&&isAdmin?/*#__PURE__*/React.createElement(Modal,{show:showModal,onHide:handleModalClose,backdrop:\"static\",keyboard:false,animation:\"false\"},/*#__PURE__*/React.createElement(Modal.Header,{closeButton:true},/*#__PURE__*/React.createElement(Modal.Title,null,\"Confirm Delete\")),/*#__PURE__*/React.createElement(Modal.Body,null,\"Are you sure you want to delete this product?\"),/*#__PURE__*/React.createElement(Modal.Footer,null,/*#__PURE__*/React.createElement(Button,{variant:\"secondary\",onClick:handleModalClose},\"Cancel\"),/*#__PURE__*/React.createElement(Button,{variant:\"danger\",onClick:handleDelete},\"Confirm Delete\"))):null,/*#__PURE__*/React.createElement(Row,{xs:1,md:2},loading?/*#__PURE__*/React.createElement(LoadingSpinner,null):productData?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Col,{className:\"mb-4\"},/*#__PURE__*/React.createElement(Image,{src:\"\".concat(baseUrl,\"/\").concat(productData.productImage),fluid:true})),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"h2\",null,productData.productName),/*#__PURE__*/React.createElement(\"h4\",null,\"By: \",productData.manufacturer),/*#__PURE__*/React.createElement(\"b\",null,\"Price: $\",productData.price.toFixed(2)),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"p\",null,productData.description),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Button,{variant:productData.stockQty>0?\"primary\":\"light\",onClick:function onClick(){return handleAddToCart(productData._id);},className:\"mt-4\",disabled:productData.stockQty>0?false:true},/*#__PURE__*/React.createElement(Badge,null,/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-shopping-cart\"})),\"Add to Card\"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"p\",null,\"Rating: \",productData.rating),/*#__PURE__*/React.createElement(\"p\",null,\"UPC: \",productData.upc),/*#__PURE__*/React.createElement(Container,null,productData.stockQty>0?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h5\",null,/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-truck\",style:{color:\"#007bff\"}}),\" \",\"Available to Ship\"),/*#__PURE__*/React.createElement(\"p\",null,\"Orders over $50 qualify for free shipping.\"),/*#__PURE__*/React.createElement(\"h5\",null,/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-check\",style:{color:\"green\"}}),\" \",\"This item is available\")):/*#__PURE__*/React.createElement(\"h3\",null,/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-times\",style:{color:\"red\"}}),\" \",\"Out of Stock\"),/*#__PURE__*/React.createElement(\"p\",null,\"Stock: \",productData.stockQty)))):/*#__PURE__*/React.createElement(Col,null,\"No content to display.\")),isAdmin&&productData?/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"h3\",null,\"Admin Actions\"),/*#__PURE__*/React.createElement(Button,{variant:\"warning\",className:\"mb-2\",as:Link,to:\"/edit-product/\".concat(productData._id)},\"Edit Product\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Button,{variant:\"danger\",onClick:handleModalShow},\"Delete Product\"))):null,/*#__PURE__*/React.createElement(FeaturedItems,null));}","map":{"version":3,"sources":["/home/andre/Documents/GithubRepos/Group_06/client/src/pages/ProductDetail.js"],"names":["React","useEffect","useState","axios","APIpaths","baseUrl","Alert","Badge","Button","Col","Container","Image","Modal","Row","useCart","useAuth","Link","useHistory","LoadingSpinner","FeaturedItems","ProductDetail","match","productData","setProductData","loading","setLoading","showAlert","setShowAlert","showModal","setShowModal","addToCart","isAdmin","deleteProduct","history","handleModalClose","handleModalShow","handleDelete","e","preventDefault","_id","push","error","console","log","handleAddToCart","productId","window","scrollTo","get","getOneItem","params","id","then","res","data","catch","err","productImage","productName","manufacturer","price","toFixed","description","stockQty","rating","upc","color"],"mappings":"wKAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,CAAmBC,OAAnB,KAAkC,QAAlC,CACA,OACEC,KADF,CAEEC,KAFF,CAGEC,MAHF,CAIEC,GAJF,CAKEC,SALF,CAMEC,KANF,CAOEC,KAPF,CAQEC,GARF,KASO,iBATP,CAUA,OAASC,OAAT,KAAwB,yBAAxB,CACA,OAASC,OAAT,KAAwB,yBAAxB,CACA,OAASC,IAAT,CAAeC,UAAf,KAAiC,kBAAjC,CACA,MAAOC,CAAAA,cAAP,KAA2B,8BAA3B,CACA,MAAOC,CAAAA,aAAP,KAA0B,6BAA1B,CAEA,cAAe,SAASC,CAAAA,aAAT,MAAkC,IAATC,CAAAA,KAAS,MAATA,KAAS,eACTnB,QAAQ,EADC,wCACxCoB,WADwC,eAC3BC,cAD2B,8BAEjBrB,QAAQ,CAAC,KAAD,CAFS,yCAExCsB,OAFwC,eAE/BC,UAF+B,8BAGbvB,QAAQ,CAAC,KAAD,CAHK,yCAGxCwB,SAHwC,eAG7BC,YAH6B,8BAIbzB,QAAQ,CAAC,KAAD,CAJK,yCAIxC0B,SAJwC,eAI7BC,YAJ6B,4BAMzBf,OAAO,EANkB,CAMvCgB,SANuC,UAMvCA,SANuC,cAOZf,OAAO,EAPK,CAOvCgB,OAPuC,UAOvCA,OAPuC,CAO9BC,aAP8B,UAO9BA,aAP8B,CAS/C,GAAMC,CAAAA,OAAO,CAAGhB,UAAU,EAA1B,CAEA,QAASiB,CAAAA,gBAAT,EAA4B,CAC1BL,YAAY,CAAC,KAAD,CAAZ,CACD,CAED,QAASM,CAAAA,eAAT,EAA2B,CACzBN,YAAY,CAAC,IAAD,CAAZ,CACD,CAED,QAASO,CAAAA,YAAT,CAAsBC,CAAtB,CAAyB,CACvBA,CAAC,CAACC,cAAF,GAEA,GAAI,CACFN,aAAa,CAACV,WAAW,CAACiB,GAAb,CAAb,CACAN,OAAO,CAACO,IAAR,CAAa,WAAb,EACD,CAAC,MAAOC,KAAP,CAAc,CACdC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACD,CACF,CAED,QAASG,CAAAA,eAAT,CAAyBC,SAAzB,CAAoC,CAClClB,YAAY,CAAC,IAAD,CAAZ,CACAG,SAAS,CAACe,SAAD,CAAT,CACD,CAED5C,SAAS,CAAC,UAAM,CACd6C,MAAM,CAACC,QAAP,CAAgB,CAAhB,CAAmB,CAAnB,EACAtB,UAAU,CAAC,IAAD,CAAV,CACAtB,KAAK,CACF6C,GADH,CACO5C,QAAQ,CAAC6C,UAAT,CAAsB5B,KAAK,CAAC6B,MAAN,CAAaC,EAD1C,EAEGC,IAFH,CAEQ,SAACC,GAAD,CAAS,CACb9B,cAAc,CAAC8B,GAAG,CAACC,IAAL,CAAd,CACA7B,UAAU,CAAC,KAAD,CAAV,CACD,CALH,EAMG8B,KANH,CAMS,SAACC,GAAD,QAASd,CAAAA,OAAO,CAACC,GAAR,CAAYa,GAAZ,CAAT,EANT,EAOD,CAVQ,CAUN,CAACnC,KAAK,CAAC6B,MAAN,CAAaC,EAAd,CAVM,CAAT,CAYA,mBACE,oBAAC,SAAD,EAAW,SAAS,CAAC,iBAArB,EACGzB,SAAS,eACR,oBAAC,KAAD,EACE,OAAO,CAAC,SADV,CAEE,OAAO,CAAE,yBAAMC,CAAAA,YAAY,CAAC,KAAD,CAAlB,EAFX,CAGE,WAAW,KAHb,eAKE,+DALF,CAFJ,CAUG,CAACH,OAAD,EAAYO,OAAZ,cACC,oBAAC,KAAD,EACE,IAAI,CAAEH,SADR,CAEE,MAAM,CAAEM,gBAFV,CAGE,QAAQ,CAAC,QAHX,CAIE,QAAQ,CAAE,KAJZ,CAKE,SAAS,CAAC,OALZ,eAOE,oBAAC,KAAD,CAAO,MAAP,EAAc,WAAW,KAAzB,eACE,oBAAC,KAAD,CAAO,KAAP,uBADF,CAPF,cAUE,oBAAC,KAAD,CAAO,IAAP,sDAVF,cAWE,oBAAC,KAAD,CAAO,MAAP,mBACE,oBAAC,MAAD,EAAQ,OAAO,CAAC,WAAhB,CAA4B,OAAO,CAAEA,gBAArC,WADF,cAIE,oBAAC,MAAD,EAAQ,OAAO,CAAC,QAAhB,CAAyB,OAAO,CAAEE,YAAlC,mBAJF,CAXF,CADD,CAqBG,IA/BN,cAgCE,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAT,CAAY,EAAE,CAAE,CAAhB,EACGZ,OAAO,cACN,oBAAC,cAAD,MADM,CAEJF,WAAW,cACb,qDACE,oBAAC,GAAD,EAAK,SAAS,CAAC,MAAf,eACE,oBAAC,KAAD,EAAO,GAAG,WAAKjB,OAAL,aAAgBiB,WAAW,CAACmC,YAA5B,CAAV,CAAsD,KAAK,KAA3D,EADF,CADF,cAIE,oBAAC,GAAD,mBACE,8BAAKnC,WAAW,CAACoC,WAAjB,CADF,cAEE,qCAASpC,WAAW,CAACqC,YAArB,CAFF,cAGE,wCAAYrC,WAAW,CAACsC,KAAZ,CAAkBC,OAAlB,CAA0B,CAA1B,CAAZ,CAHF,cAIE,8BAJF,cAKE,6BAAIvC,WAAW,CAACwC,WAAhB,CALF,cAME,8BANF,cAQE,oBAAC,MAAD,EACE,OAAO,CAAExC,WAAW,CAACyC,QAAZ,CAAuB,CAAvB,CAA2B,SAA3B,CAAuC,OADlD,CAEE,OAAO,CAAE,yBAAMnB,CAAAA,eAAe,CAACtB,WAAW,CAACiB,GAAb,CAArB,EAFX,CAGE,SAAS,CAAC,MAHZ,CAIE,QAAQ,CAAEjB,WAAW,CAACyC,QAAZ,CAAuB,CAAvB,CAA2B,KAA3B,CAAmC,IAJ/C,eAME,oBAAC,KAAD,mBACE,yBAAG,SAAS,CAAC,sBAAb,EADF,CANF,eARF,cAoBE,8BApBF,cAsBE,wCAAYzC,WAAW,CAAC0C,MAAxB,CAtBF,cAuBE,qCAAS1C,WAAW,CAAC2C,GAArB,CAvBF,cAyBE,oBAAC,SAAD,MACG3C,WAAW,CAACyC,QAAZ,CAAuB,CAAvB,cACC,4CACE,2CACE,yBACE,SAAS,CAAC,cADZ,CAEE,KAAK,CAAE,CAAEG,KAAK,CAAE,SAAT,CAFT,EADF,CAIQ,GAJR,qBADF,cAQE,0EARF,cASE,2CACE,yBACE,SAAS,CAAC,cADZ,CAEE,KAAK,CAAE,CAAEA,KAAK,CAAE,OAAT,CAFT,EADF,CAIQ,GAJR,0BATF,CADD,cAmBC,2CACE,yBAAG,SAAS,CAAC,cAAb,CAA4B,KAAK,CAAE,CAAEA,KAAK,CAAE,KAAT,CAAnC,EADF,CAC4D,GAD5D,gBApBJ,cAyBE,uCAAW5C,WAAW,CAACyC,QAAvB,CAzBF,CAzBF,CAJF,CADa,cA4Db,oBAAC,GAAD,+BA/DJ,CAhCF,CAkGGhC,OAAO,EAAIT,WAAX,cACC,oBAAC,GAAD,mBACE,oBAAC,GAAD,mBACE,8BADF,cAEE,8CAFF,cAIE,oBAAC,MAAD,EACE,OAAO,CAAC,SADV,CAEE,SAAS,CAAC,MAFZ,CAGE,EAAE,CAAEN,IAHN,CAIE,EAAE,yBAAmBM,WAAW,CAACiB,GAA/B,CAJJ,iBAJF,cAYE,8BAZF,cAaE,oBAAC,MAAD,EAAQ,OAAO,CAAC,QAAhB,CAAyB,OAAO,CAAEJ,eAAlC,mBAbF,CADF,CADD,CAoBG,IAtHN,cAuHE,oBAAC,aAAD,MAvHF,CADF,CA2HD","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { APIpaths, baseUrl } from \"../API\";\nimport {\n  Alert,\n  Badge,\n  Button,\n  Col,\n  Container,\n  Image,\n  Modal,\n  Row,\n} from \"react-bootstrap\";\nimport { useCart } from \"../contexts/CartContext\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport LoadingSpinner from \"../components/LoadingSpinner\";\nimport FeaturedItems from \"../components/FeaturedItems\";\n\nexport default function ProductDetail({ match }) {\n  const [productData, setProductData] = useState();\n  const [loading, setLoading] = useState(false);\n  const [showAlert, setShowAlert] = useState(false);\n  const [showModal, setShowModal] = useState(false);\n\n  const { addToCart } = useCart();\n  const { isAdmin, deleteProduct } = useAuth();\n\n  const history = useHistory();\n\n  function handleModalClose() {\n    setShowModal(false);\n  }\n\n  function handleModalShow() {\n    setShowModal(true);\n  }\n\n  function handleDelete(e) {\n    e.preventDefault();\n\n    try {\n      deleteProduct(productData._id);\n      history.push(\"/products\");\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  function handleAddToCart(productId) {\n    setShowAlert(true);\n    addToCart(productId);\n  }\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n    setLoading(true);\n    axios\n      .get(APIpaths.getOneItem + match.params.id)\n      .then((res) => {\n        setProductData(res.data);\n        setLoading(false);\n      })\n      .catch((err) => console.log(err));\n  }, [match.params.id]);\n\n  return (\n    <Container className=\"min-vh-100 mt-5\">\n      {showAlert && (\n        <Alert\n          variant=\"success\"\n          onClose={() => setShowAlert(false)}\n          dismissible\n        >\n          <p>Product has been added to cart.</p>\n        </Alert>\n      )}\n      {!loading && isAdmin ? (\n        <Modal\n          show={showModal}\n          onHide={handleModalClose}\n          backdrop=\"static\"\n          keyboard={false}\n          animation=\"false\"\n        >\n          <Modal.Header closeButton>\n            <Modal.Title>Confirm Delete</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>Are you sure you want to delete this product?</Modal.Body>\n          <Modal.Footer>\n            <Button variant=\"secondary\" onClick={handleModalClose}>\n              Cancel\n            </Button>\n            <Button variant=\"danger\" onClick={handleDelete}>\n              Confirm Delete\n            </Button>\n          </Modal.Footer>\n        </Modal>\n      ) : null}\n      <Row xs={1} md={2}>\n        {loading ? (\n          <LoadingSpinner />\n        ) : productData ? (\n          <>\n            <Col className=\"mb-4\">\n              <Image src={`${baseUrl}/${productData.productImage}`} fluid />\n            </Col>\n            <Col>\n              <h2>{productData.productName}</h2>\n              <h4>By: {productData.manufacturer}</h4>\n              <b>Price: ${productData.price.toFixed(2)}</b>\n              <hr />\n              <p>{productData.description}</p>\n              <br />\n\n              <Button\n                variant={productData.stockQty > 0 ? \"primary\" : \"light\"}\n                onClick={() => handleAddToCart(productData._id)}\n                className=\"mt-4\"\n                disabled={productData.stockQty > 0 ? false : true}\n              >\n                <Badge>\n                  <i className=\"fas fa-shopping-cart\"></i>\n                </Badge>\n                Add to Card\n              </Button>\n\n              <hr />\n\n              <p>Rating: {productData.rating}</p>\n              <p>UPC: {productData.upc}</p>\n\n              <Container>\n                {productData.stockQty > 0 ? (\n                  <div>\n                    <h5>\n                      <i\n                        className=\"fas fa-truck\"\n                        style={{ color: \"#007bff\" }}\n                      ></i>{\" \"}\n                      Available to Ship\n                    </h5>\n                    <p>Orders over $50 qualify for free shipping.</p>\n                    <h5>\n                      <i\n                        className=\"fas fa-check\"\n                        style={{ color: \"green\" }}\n                      ></i>{\" \"}\n                      This item is available\n                    </h5>\n                  </div>\n                ) : (\n                  <h3>\n                    <i className=\"fas fa-times\" style={{ color: \"red\" }}></i>{\" \"}\n                    Out of Stock\n                  </h3>\n                )}\n                <p>Stock: {productData.stockQty}</p>\n              </Container>\n            </Col>\n          </>\n        ) : (\n          <Col>No content to display.</Col>\n        )}\n      </Row>\n      {isAdmin && productData ? (\n        <Row>\n          <Col>\n            <hr />\n            <h3>Admin Actions</h3>\n\n            <Button\n              variant=\"warning\"\n              className=\"mb-2\"\n              as={Link}\n              to={`/edit-product/${productData._id}`}\n            >\n              Edit Product\n            </Button>\n            <br />\n            <Button variant=\"danger\" onClick={handleModalShow}>\n              Delete Product\n            </Button>\n          </Col>\n        </Row>\n      ) : null}\n      <FeaturedItems />\n    </Container>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}